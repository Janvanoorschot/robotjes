#!/usr/bin/env python3

import sys, os, datetime
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), os.pardir)))


import gi
gi.require_version("Gtk", "3.0")
from gi.repository import Gtk
from gi.repository import GLib
from ui import RoboTeacherWindow, RoboTeacher, RoboRequestor


model = RoboRequestor('http://localhost:8000/')
view = RoboTeacherWindow(model)
controller = RoboTeacher(model, view)
view.add_listener(controller)


def timer():
    controller.timer(datetime.datetime.now())
    GLib.timeout_add(1000, timer)


GLib.timeout_add(1000, timer)

view.connect("destroy", Gtk.main_quit)
view.show_all()
Gtk.main()
