#!/usr/bin/env python3

import sys, os, datetime
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), os.pardir)))


import gi
gi.require_version("Gtk", "3.0")
from gi.repository import Gtk
from gi.repository import GLib
from robotjessrv.client.ui import RoboUmpireWindow, RoboUmpire, RoboRequestor


model = RoboRequestor('http://localhost:8000/')
view = RoboUmpireWindow(model)
controller = RoboUmpire(model, view)
view.add_listener(controller)


def timer():
    GLib.idle_add(controller.timer, datetime.datetime.now())
    # controller.timer(datetime.datetime.now())
    GLib.timeout_add(1000, timer)


GLib.timeout_add(1000, timer)

view.connect("destroy", Gtk.main_quit)
view.show_all()
Gtk.main()
